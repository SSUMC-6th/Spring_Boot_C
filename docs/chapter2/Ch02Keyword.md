# Ch02. AWS (VPC & Internet Gateway & EC2)
2주차 워크북 - AWS (VPC & Internet Gateway & EC2)

<br>

# AWS 리전
AWS는 수많은 컴퓨팅 서비스를 지원하고 있고, 이를 위한 대규모의 서버용 컴퓨터가 필요할 것이다. 이 때 서버용 컴퓨터를 모두 한 곳에 몰아둔다면

1. 서버가 있는 지역에 자연재해가 발생할 경우, 모든 서비스가 마비되고
2. 자원이 한 곳에 몰려있는 경우, 그곳과 지구 반대편에 위치한 지역은 거리가 멀기 때문에 서비스 속도가 느릴 것이다.

위와 같은 문제를 해결하기 위해 서비스를 여러 곳에 분산하여 배치하였고, 이를 리전이라고 한다.
- 가용영역

리전을 한 번 더 분산시켜 배치한 것이다. 1개 이상의 물리 데이터센터를 묶은 그룹이라고 볼 수 있다. 

- 리전과 가용영역의 차이

가용영역은 데이터센터 그룹이고 리전은 가용영역 여러 개로 구성된 **지리적 영역**이다.
<br>
<br>    

    
# 라우팅
- source -> dest까지 패킷의 이동경로를 설정하는 것

<br>
<br>

# VPC
VPC(Virtual Private Cloud): AWS에서 제공하는 가상 네트워킹 환경, 사설 IP주소를 가진다.

<br>
<br>

# VPC 실제 사용
VPC는 실제 사용 될 때, VPC 자체에서도 서브넷을 나눠서 원하는 가용영역에 배치하여 사용한다. 이 때,

1. 첫 주소 : 서브넷의 네트워크 대역
2. 두번째 : VPC 라우터에 할당
3. 세번째 : Amazon이 제공하는 DNS에 할당
4. 미래를 위해 예약
5. 브로드 캐스트 주소

로 사용되기 때문에 이들은 호스트 주소로 할당할 수 없다. (예약되어 있다.)

1. 첫 번째 주소

만약 서브넷의 CIDR 블록이 10.0.0.0/24라면, 여기서 10.0.0.0은 네트워크 주소이다. 

2. 두 번째

VPC 라우터에 할당되는 주소이다. 만약 CIDR 블록이 10.0.0.0/16이고 서브넷의 CIDR 블록이 10.0.1.0/24라면 두 번째 주소는 10.0.1.1이 된다.

3. 세 번째

이 주소는 인스턴스가 도메인 이름을 해석할 때 사용된다. 

<br>
<br>

# 포트포워딩
포트포워딩은 패킷이 라우터나 게이트웨이를 통과하는 동안 이 패킷이 어느 포트로 가야할 지 결정해주는 것을 말한다.

예를 들어,

공유기를 설치하고 공유기와 연결된 여러 PC가 있다고 하자. PC들은 공유기로부터 IP를 부여받는다. 외부에서 들어오는 패킷은 많은 PC 중 어느 PC로 가야하는지 길을 찾지 못할 것이다. (이 때는 공유기의 포트 번호르 들고 오기 때문에)

그래서 패킷이 올바른 PC를 찾아갈 수 있도록 공유기는 NAT table을 참고하여 해당 PC의 포트번호를 패킷에게 알려준다.

<br>
<br>

# NAT 프로토콜
게이트웨이에서 외부 네트워크로 나갈 때는 네트워크 내부의 사설IP가 아닌 공인IP주소로 바뀐다. 
<br>
<br>

# Private Subnet